"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6540],{"./components/combinations/overlays/widgets/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{KM:()=>ModalWidgetBackdrop,K7:()=>ModalWidgetOverlay,E7:()=>ModalWidgetPanel,Q8:()=>ModalWidgetRoot,Uv:()=>ModalWidgetTitle,k3:()=>useModalContext});var react=__webpack_require__("../../../node_modules/.pnpm/react@18.3.1/node_modules/react/index.js"),core=__webpack_require__("./core/index.ts"),hooks=__webpack_require__("./hooks/index.ts");const ModalContext=react.createContext(null);function useModalContext(component){const context=react.useContext(ModalContext);if(null===context)throw new Error(`<${component} /> is missing a parent <Modal /> component.`);return context}ModalContext.displayName="ModalContext";try{useModalContext.displayName="ModalContext",useModalContext.__docgenInfo={description:"",displayName:"ModalContext",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/combinations/overlays/widgets/Modal.Widget.Context.tsx#ModalContext"]={docgenInfo:ModalContext.__docgenInfo,name:"ModalContext",path:"src/components/combinations/overlays/widgets/Modal.Widget.Context.tsx#ModalContext"})}catch(__react_docgen_typescript_loader_error){}const ModalWidgetBackdrop=(0,core.FX)(((props,ref)=>{const id=`RootUI__Modal__Backdrop-${(0,hooks.Bi)()}`,[{visible},state]=useModalContext("Root__Modal__Backdrop"),backdropRef=(0,hooks.P$)(ref);react.useEffect((()=>{if(null===state.panelRef.current)throw new Error("A <Modal.Backdrop /> component is being used, but a <Modal.Panel /> component is missing.")}),[state.panelRef]);const ourProps=react.useMemo((()=>({id,ref:backdropRef,"aria-hidden":!0})),[id,backdropRef]),theirProps=props,slot=react.useMemo((()=>({visible})),[visible]);return(0,core.XX)({defaultTag:"div",name:"Root__Modal__Backdrop",ourProps,slot,theirProps})}));try{ModalWidgetBackdrop.displayName="ModalWidgetBackdrop",ModalWidgetBackdrop.__docgenInfo={description:"",displayName:"ModalWidgetBackdrop",props:{as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"ElementType<any, keyof IntrinsicElements>"}},refName:{defaultValue:null,description:"",name:"refName",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/combinations/overlays/widgets/Modal.Widget.Backdrop.tsx#ModalWidgetBackdrop"]={docgenInfo:ModalWidgetBackdrop.__docgenInfo,name:"ModalWidgetBackdrop",path:"src/components/combinations/overlays/widgets/Modal.Widget.Backdrop.tsx#ModalWidgetBackdrop"})}catch(__react_docgen_typescript_loader_error){}function isDisabledReactIssue7711(element){let parent=element.parentElement,legend=null;for(;parent&&!(parent instanceof HTMLFieldSetElement);)parent instanceof HTMLLegendElement&&(legend=parent),parent=parent.parentElement;const isParentDisabled=""===parent?.getAttribute("disabled")??!1;return(!isParentDisabled||!function isFirstLegend(element){if(!element)return!1;let previous=element.previousElementSibling;for(;null!==previous;){if(previous instanceof HTMLLegendElement)return!1;previous=previous.previousElementSibling}return!0}(legend))&&isParentDisabled}const ModalWidgetOverlay=(0,core.FX)(((props,ref)=>{const id=`RootUI__Modal__Overlay-${(0,hooks.Bi)()}`,[{onClose,visible}]=useModalContext("Root__Modal__Overlay"),overlayRef=(0,hooks.P$)(ref),handleClick=(0,hooks._q)((event=>{if(event.target===event.currentTarget){if(isDisabledReactIssue7711(event.currentTarget))return event.preventDefault();event.preventDefault(),event.stopPropagation(),onClose()}})),ourProps=react.useMemo((()=>({id,ref:overlayRef,"aria-hidden":!0,onClick:handleClick})),[handleClick,id,overlayRef]),theirProps=props,slot=react.useMemo((()=>({visible})),[visible]);return(0,core.XX)({defaultTag:"div",name:"Root__Modal__Overlay",ourProps,slot,theirProps})}));try{ModalWidgetOverlay.displayName="ModalWidgetOverlay",ModalWidgetOverlay.__docgenInfo={description:"",displayName:"ModalWidgetOverlay",props:{as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"ElementType<any, keyof IntrinsicElements>"}},refName:{defaultValue:null,description:"",name:"refName",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/combinations/overlays/widgets/Modal.Widget.Overlay.tsx#ModalWidgetOverlay"]={docgenInfo:ModalWidgetOverlay.__docgenInfo,name:"ModalWidgetOverlay",path:"src/components/combinations/overlays/widgets/Modal.Widget.Overlay.tsx#ModalWidgetOverlay"})}catch(__react_docgen_typescript_loader_error){}const ModalWidgetPanel=(0,core.FX)(((props,ref)=>{const id=`RootUI__Modal__Panel-${(0,hooks.Bi)()}`,[{visible},state]=useModalContext("Root__Modal__Panel"),panelRef=(0,hooks.P$)(ref,state.panelRef),handleClick=(0,hooks._q)((event=>{event.stopPropagation()})),ourProps=react.useMemo((()=>({id,ref:panelRef,onClick:handleClick})),[id,panelRef,handleClick]),theirProps=props,slot=react.useMemo((()=>({visible})),[visible]);return(0,core.XX)({defaultTag:"div",name:"Root__Modal__Panel",ourProps,slot,theirProps})}));try{ModalWidgetPanel.displayName="ModalWidgetPanel",ModalWidgetPanel.__docgenInfo={description:"",displayName:"ModalWidgetPanel",props:{as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"ElementType<any, keyof IntrinsicElements>"}},refName:{defaultValue:null,description:"",name:"refName",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/combinations/overlays/widgets/Modal.Widget.Panel.tsx#ModalWidgetPanel"]={docgenInfo:ModalWidgetPanel.__docgenInfo,name:"ModalWidgetPanel",path:"src/components/combinations/overlays/widgets/Modal.Widget.Panel.tsx#ModalWidgetPanel"})}catch(__react_docgen_typescript_loader_error){}var constants=__webpack_require__("./constants/index.ts"),FocusManagements=__webpack_require__("./tools/focus-trap/FocusManagements.ts");let HiddenFeatures=function(HiddenFeatures){return HiddenFeatures[HiddenFeatures.Focusable=2]="Focusable",HiddenFeatures[HiddenFeatures.Hidden=4]="Hidden",HiddenFeatures[HiddenFeatures.None=1]="None",HiddenFeatures}({});const Hidden=(0,core.FX)(((props,ref)=>{const{features=HiddenFeatures.None,...theirProps}=props,ourProps={ref,"aria-hidden":(features&HiddenFeatures.Focusable)===HiddenFeatures.Focusable||void 0,style:{borderWidth:"0",clip:"rect(0, 0, 0, 0)",height:0,left:1,margin:-1,overflow:"hidden",padding:0,position:"fixed",top:1,whiteSpace:"nowrap",width:1,...(features&HiddenFeatures.Hidden)===HiddenFeatures.Hidden&&!((features&HiddenFeatures.Focusable)===HiddenFeatures.Focusable)&&{display:"none"}}};return(0,core.XX)({defaultTag:"div",name:"Hidden",ourProps,slot:{},theirProps})}));try{Hidden.displayName="Hidden",Hidden.__docgenInfo={description:"",displayName:"Hidden",props:{as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"ElementType"}},refName:{defaultValue:null,description:"",name:"refName",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"any"}},features:{defaultValue:null,description:"",name:"features",required:!1,type:{name:"enum",value:[{value:"2"},{value:"4"},{value:"1"}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/tools/hidden/Hidden.tsx#Hidden"]={docgenInfo:Hidden.__docgenInfo,name:"Hidden",path:"src/tools/hidden/Hidden.tsx#Hidden"})}catch(__react_docgen_typescript_loader_error){}var utils=__webpack_require__("./utils/index.ts");let FocusTrapFeatures=function(FocusTrapFeatures){return FocusTrapFeatures[FocusTrapFeatures.None=1]="None",FocusTrapFeatures[FocusTrapFeatures.InitialFocus=2]="InitialFocus",FocusTrapFeatures[FocusTrapFeatures.TabLock=4]="TabLock",FocusTrapFeatures[FocusTrapFeatures.FocusLock=8]="FocusLock",FocusTrapFeatures[FocusTrapFeatures.RestoreFocus=16]="RestoreFocus",FocusTrapFeatures[FocusTrapFeatures.AutoFocus=32]="AutoFocus",FocusTrapFeatures[FocusTrapFeatures.All=30]="All",FocusTrapFeatures}({});const FocusTrap=Object.assign((0,core.FX)(((_ref,ref)=>{let{containers,features=FocusTrapFeatures.All,initialFocus,...theirProps}=_ref;const container=react.useRef(null),focusTrapRef=(0,hooks.P$)(container,ref),ownerDocument=(0,hooks.g6)(container),direction=(0,hooks.uG)();(0,hooks.g7)()||(features=FocusTrapFeatures.None),function useRestoreFocus(_ref,enabled){let{ownerDocument}=_ref;const restoreElement=react.useRef(null);(0,hooks.ML)(ownerDocument?.defaultView,"focusout",(event=>{enabled&&(restoreElement.current||(restoreElement.current=event.target))}),!0),(0,hooks.FH)((()=>{enabled||(ownerDocument?.activeElement===ownerDocument?.body&&(0,FocusManagements.pW)(restoreElement.current),restoreElement.current=null)}),[enabled]);const trulyUnmounted=react.useRef(!1);react.useEffect((()=>(trulyUnmounted.current=!1,()=>{trulyUnmounted.current=!0,(0,utils.ft)((()=>{trulyUnmounted.current&&((0,FocusManagements.pW)(restoreElement.current),restoreElement.current=null)}))})),[])}({ownerDocument},Boolean(features&FocusTrapFeatures.RestoreFocus));const previousActiveElement=function useInitialFocus(_ref,enabled){let{container,initialFocus,ownerDocument}=_ref;const isMounted=(0,hooks.aq)(),previousActiveElement=react.useRef(null);return(0,hooks.FH)((()=>{if(!enabled)return;const containerElement=container.current;containerElement&&(0,utils.ft)((()=>{if(!isMounted.current)return;const activeElement=ownerDocument?.activeElement;if(initialFocus?.current){if(initialFocus?.current===activeElement)return void(previousActiveElement.current=activeElement)}else if(containerElement.contains(activeElement))return void(previousActiveElement.current=activeElement);initialFocus?.current?(0,FocusManagements.pW)(initialFocus.current):(0,FocusManagements.CU)(containerElement,FocusManagements.BD.First)===FocusManagements.Me.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),previousActiveElement.current=ownerDocument?.activeElement}))}),[enabled]),previousActiveElement}({container,initialFocus,ownerDocument},Boolean(features&FocusTrapFeatures.InitialFocus));!function useFocusLock(_ref,enabled){let{container,containers,ownerDocument,previousActiveElement}=_ref;const mounted=(0,hooks.aq)();(0,hooks.ML)(ownerDocument?.defaultView,"focus",(event=>{if(!enabled)return;if(!mounted.current)return;const allContainerSet=new Set(containers?.current);allContainerSet.add(container);const previous=previousActiveElement.current;if(!previous)return;const toElement=event.target;toElement&&toElement instanceof HTMLElement?function contains(containers,element){for(const container of containers)if(container.current?.contains(element))return!0;return!1}(allContainerSet,toElement)?(previousActiveElement.current=toElement,(0,FocusManagements.pW)(toElement)):(event.preventDefault(),event.stopPropagation(),(0,FocusManagements.pW)(previous)):(0,FocusManagements.pW)(previousActiveElement.current)}),!0)}({container,containers,ownerDocument,previousActiveElement},Boolean(features&FocusTrapFeatures.FocusLock));const handleFocus=(0,hooks._q)((()=>{const el=container.current;el&&(0,utils.YW)(direction.current,{[hooks.$Z.Backwards]:()=>(0,FocusManagements.CU)(el,FocusManagements.BD.Last),[hooks.$Z.Forwards]:()=>(0,FocusManagements.CU)(el,FocusManagements.BD.First)})})),ourProps=react.useMemo((()=>({ref:focusTrapRef})),[focusTrapRef]);return react.createElement(react.Fragment,null,Boolean(features&FocusTrapFeatures.TabLock)&&react.createElement(Hidden,{as:"button",features:HiddenFeatures.Focusable,onFocus:handleFocus,type:"button"}),(0,core.XX)({defaultTag:"div",name:"FocusTrap",ourProps,theirProps}),Boolean(features&FocusTrapFeatures.TabLock)&&react.createElement(Hidden,{as:"button",features:HiddenFeatures.Focusable,onFocus:handleFocus,type:"button"}))})),{features:FocusTrapFeatures});try{None.displayName="FocusTrapFeatures.None",None.__docgenInfo={description:"No features enabled for the focus trap.",displayName:"FocusTrapFeatures.None",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/tools/focus-trap/FocusTrap.tsx#FocusTrapFeatures.None"]={docgenInfo:FocusTrapFeatures.None.__docgenInfo,name:"FocusTrapFeatures.None",path:"src/tools/focus-trap/FocusTrap.tsx#FocusTrapFeatures.None"})}catch(__react_docgen_typescript_loader_error){}try{InitialFocus.displayName="FocusTrapFeatures.InitialFocus",InitialFocus.__docgenInfo={description:"Ensure that we move focus initially into the container.",displayName:"FocusTrapFeatures.InitialFocus",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/tools/focus-trap/FocusTrap.tsx#FocusTrapFeatures.InitialFocus"]={docgenInfo:FocusTrapFeatures.InitialFocus.__docgenInfo,name:"FocusTrapFeatures.InitialFocus",path:"src/tools/focus-trap/FocusTrap.tsx#FocusTrapFeatures.InitialFocus"})}catch(__react_docgen_typescript_loader_error){}try{TabLock.displayName="FocusTrapFeatures.TabLock",TabLock.__docgenInfo={description:"Ensure that pressing `Tab` and `Shift+Tab` is trapped within the container.",displayName:"FocusTrapFeatures.TabLock",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/tools/focus-trap/FocusTrap.tsx#FocusTrapFeatures.TabLock"]={docgenInfo:FocusTrapFeatures.TabLock.__docgenInfo,name:"FocusTrapFeatures.TabLock",path:"src/tools/focus-trap/FocusTrap.tsx#FocusTrapFeatures.TabLock"})}catch(__react_docgen_typescript_loader_error){}try{FocusLock.displayName="FocusTrapFeatures.FocusLock",FocusLock.__docgenInfo={description:"Ensure that programmatically moving focus outside of the container is disallowed.",displayName:"FocusTrapFeatures.FocusLock",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/tools/focus-trap/FocusTrap.tsx#FocusTrapFeatures.FocusLock"]={docgenInfo:FocusTrapFeatures.FocusLock.__docgenInfo,name:"FocusTrapFeatures.FocusLock",path:"src/tools/focus-trap/FocusTrap.tsx#FocusTrapFeatures.FocusLock"})}catch(__react_docgen_typescript_loader_error){}try{RestoreFocus.displayName="FocusTrapFeatures.RestoreFocus",RestoreFocus.__docgenInfo={description:"Ensure that we restore the focus when unmounting the focus trap.",displayName:"FocusTrapFeatures.RestoreFocus",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/tools/focus-trap/FocusTrap.tsx#FocusTrapFeatures.RestoreFocus"]={docgenInfo:FocusTrapFeatures.RestoreFocus.__docgenInfo,name:"FocusTrapFeatures.RestoreFocus",path:"src/tools/focus-trap/FocusTrap.tsx#FocusTrapFeatures.RestoreFocus"})}catch(__react_docgen_typescript_loader_error){}try{AutoFocus.displayName="FocusTrapFeatures.AutoFocus",AutoFocus.__docgenInfo={description:"Initial focus should look for the `data-autofocus`",displayName:"FocusTrapFeatures.AutoFocus",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/tools/focus-trap/FocusTrap.tsx#FocusTrapFeatures.AutoFocus"]={docgenInfo:FocusTrapFeatures.AutoFocus.__docgenInfo,name:"FocusTrapFeatures.AutoFocus",path:"src/tools/focus-trap/FocusTrap.tsx#FocusTrapFeatures.AutoFocus"})}catch(__react_docgen_typescript_loader_error){}try{All.displayName="FocusTrapFeatures.All",All.__docgenInfo={description:"Enable all features.",displayName:"FocusTrapFeatures.All",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/tools/focus-trap/FocusTrap.tsx#FocusTrapFeatures.All"]={docgenInfo:FocusTrapFeatures.All.__docgenInfo,name:"FocusTrapFeatures.All",path:"src/tools/focus-trap/FocusTrap.tsx#FocusTrapFeatures.All"})}catch(__react_docgen_typescript_loader_error){}const OpenClosedContext=react.createContext(null);OpenClosedContext.displayName="OpenClosedContext";function OpenClosedProvider(_ref){let{children,value}=_ref;return React.createElement(OpenClosedContext.Provider,{value},children)}try{OpenClosedProvider.displayName="OpenClosedContext",OpenClosedProvider.__docgenInfo={description:"",displayName:"OpenClosedContext",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"enum",value:[{value:"0"},{value:"1"}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/tools/open-closed/OpenClosed.tsx#OpenClosedContext"]={docgenInfo:OpenClosedContext.__docgenInfo,name:"OpenClosedContext",path:"src/tools/open-closed/OpenClosed.tsx#OpenClosedContext"})}catch(__react_docgen_typescript_loader_error){}var floating_ui_react=__webpack_require__("../../../node_modules/.pnpm/@floating-ui+react@0.26.23_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/@floating-ui/react/dist/floating-ui.react.mjs");const DEFAULT_GROUP_TAG=react.Fragment,PortalGroupContext=react.createContext(null);PortalGroupContext.displayName="PortalGroupContext";const PortalGroup=(0,core.FX)(((props,ref)=>{const{target,...others}=props,ourProps={ref:(0,hooks.P$)(ref)},theirProps=others;return react.createElement(PortalGroupContext.Provider,{value:target},(0,core.XX)({defaultTag:DEFAULT_GROUP_TAG,name:"Popover.Group",ourProps,theirProps}))}));try{PortalGroup.displayName="PortalGroupContext",PortalGroup.__docgenInfo={description:"",displayName:"PortalGroupContext",props:{as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"ElementType<any, keyof IntrinsicElements>"}},refName:{defaultValue:null,description:"",name:"refName",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"any"}},target:{defaultValue:null,description:"",name:"target",required:!0,type:{name:"MutableRefObject<HTMLElement>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/tools/portals/PortalGroup.tsx#PortalGroupContext"]={docgenInfo:PortalGroupContext.__docgenInfo,name:"PortalGroupContext",path:"src/tools/portals/PortalGroup.tsx#PortalGroupContext"})}catch(__react_docgen_typescript_loader_error){}const ForcePortalRootContext=react.createContext(!1);function ForcePortalRoot(_ref){let{children,force}=_ref;return react.createElement(ForcePortalRootContext.Provider,{value:force},children)}try{ForcePortalRoot.displayName="ForcePortalRoot",ForcePortalRoot.__docgenInfo={description:"",displayName:"ForcePortalRoot",props:{force:{defaultValue:null,description:"",name:"force",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/tools/portals/PortalForceRoot.tsx#ForcePortalRoot"]={docgenInfo:ForcePortalRoot.__docgenInfo,name:"ForcePortalRoot",path:"src/tools/portals/PortalForceRoot.tsx#ForcePortalRoot"})}catch(__react_docgen_typescript_loader_error){}function usePortalTarget(ref){const forceInRoot=function useForcePortalRoot(){return react.useContext(ForcePortalRootContext)}(),groupTarget=react.useContext(PortalGroupContext),ownerDocument=(0,hooks.g6)(ref),[target,setTarget]=react.useState((()=>{if(!forceInRoot&&null!==groupTarget)return null;if(utils.S$)return null;const existingRoot=ownerDocument?.getElementById(constants.yC.PortalRoot);if(existingRoot)return existingRoot;if(null===ownerDocument)return null;const createdPortalRoot=ownerDocument.createElement("div");return createdPortalRoot.setAttribute("id",constants.yC.PortalRoot),ownerDocument.body.appendChild(createdPortalRoot)}));return react.useEffect((()=>{null!==target&&(ownerDocument?.body.contains(target)||ownerDocument?.body.appendChild(target))}),[target,ownerDocument]),react.useEffect((()=>{forceInRoot||null!==groupTarget&&setTarget(groupTarget.current)}),[groupTarget,setTarget,forceInRoot]),target}const DEFAULT_PORTAL_TAG=react.Fragment,Portal=Object.assign((0,core.FX)(((props,ref)=>{const{root,...others}=props,internalPortalRootRef=react.useRef(null),portalRef=(0,hooks.P$)((0,hooks.aN)((ref=>{internalPortalRootRef.current=ref})),ref),ownerDocument=(0,hooks.g6)(internalPortalRootRef),target=usePortalTarget(internalPortalRootRef),[element]=react.useState((()=>utils.S$?null:ownerDocument?.createElement("div")??null)),isReady=(0,hooks.g7)(),trulyUnmounted=react.useRef(!1);if((0,hooks.s5)((()=>{if(trulyUnmounted.current=!1,target&&element)return target.contains(element)||(element.setAttribute(constants.yC.Portal,""),target.appendChild(element)),()=>{trulyUnmounted.current=!0,(0,utils.ft)((()=>{trulyUnmounted.current&&target&&element&&(target.removeChild(element),target.childNodes.length<=0&&target.parentElement?.removeChild(target))}))}}),[target,element]),!isReady)return null;if(!target||!element)return null;const ourProps={ref:portalRef},theirProps=others;return react.createElement(floating_ui_react.XF,{root:root||element},(0,core.XX)({defaultTag:DEFAULT_PORTAL_TAG,name:"Portal",ourProps,theirProps}))})),{Group:PortalGroup});try{Portal.displayName="Portal",Portal.__docgenInfo={description:"",displayName:"Portal",props:{as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"ElementType<any, keyof IntrinsicElements>"}},refName:{defaultValue:null,description:"",name:"refName",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/tools/portals/Portal.tsx#Portal"]={docgenInfo:Portal.__docgenInfo,name:"Portal",path:"src/tools/portals/Portal.tsx#Portal"})}catch(__react_docgen_typescript_loader_error){}var useEvent=__webpack_require__("./hooks/useEvent.ts"),useIsoMorphicEffect=__webpack_require__("./hooks/useIsoMorphicEffect.ts");let StackContextMessageEnum=function(StackContextMessageEnum){return StackContextMessageEnum[StackContextMessageEnum.Add=0]="Add",StackContextMessageEnum[StackContextMessageEnum.Remove=1]="Remove",StackContextMessageEnum}({});const StackContext=react.createContext((()=>{}));function StackProvider(_ref){let{type,children,element,enabled,onUpdate}=_ref;const parentUpdate=function useStackContext(){return react.useContext(StackContext)}(),notify=(0,useEvent._)((function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];onUpdate?.(...args),parentUpdate(...args)}));return(0,useIsoMorphicEffect.s)((()=>{const shouldNotify=void 0===enabled||!0===enabled;return shouldNotify&&notify(StackContextMessageEnum.Add,type,element),()=>{shouldNotify&&notify(StackContextMessageEnum.Remove,type,element)}}),[notify,type,element,enabled]),react.createElement(StackContext.Provider,{value:notify},children)}StackContext.displayName="StackContext";try{StackProvider.displayName="StackContext",StackProvider.__docgenInfo={description:"",displayName:"StackContext",props:{element:{defaultValue:null,description:"",name:"element",required:!0,type:{name:"MutableRefObject<HTMLElement>"}},enabled:{defaultValue:null,description:"",name:"enabled",required:!1,type:{name:"boolean"}},onUpdate:{defaultValue:null,description:"",name:"onUpdate",required:!1,type:{name:"StackContextOnUpdateCallback"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/tools/stacks/StackContext.tsx#StackContext"]={docgenInfo:StackContext.__docgenInfo,name:"StackContext",path:"src/tools/stacks/StackContext.tsx#StackContext"})}catch(__react_docgen_typescript_loader_error){}let ActionTypes=function(ActionTypes){return ActionTypes[ActionTypes.SetTitleId=0]="SetTitleId",ActionTypes}({});const rootReducer=(state,action)=>action.type===ActionTypes.SetTitleId?state.id===action.payload?state:{...state,id:action.payload}:state,modalRenderFeatures=core.Ac.RenderStrategy|core.Ac.Static,ModalWidgetRoot=(0,core.FX)(((props,ref)=>{const{initialFocus,onClose,onKeyDown,root,show,...others}=props,id=`RootUI__Modal__${(0,hooks.Bi)()}`,containers=react.useRef(new Set),internalModalRef=react.useRef(null),modalRef=(0,hooks.P$)(internalModalRef,ref),mainTreeNode=react.useRef(null),ownerDocument=(0,hooks.g6)(internalModalRef),initState=react.useMemo((()=>({id:null,panelRef:react.createRef()})),[]),[state,dispatch]=react.useReducer(rootReducer,initState),[nestedModalCount,setNestedModalCount]=react.useState(0),enabled=!!(0,hooks.g7)()&&!0===show,hasNestedModals=nestedModalCount>1,position=null!==react.useContext(ModalContext)?"parent":"leaf",setModalTitleId=(0,hooks._q)((id=>dispatch({type:ActionTypes.SetTitleId,payload:id}))),onCloseModal=(0,hooks._q)((()=>onClose()));(0,hooks.jz)((()=>[...Array.from(ownerDocument?.querySelectorAll(`body > *, [${constants.yC.Portal}]`)??[]).filter((container=>container instanceof HTMLElement&&(!container.contains(mainTreeNode.current)&&(!state.panelRef.current||!container.contains(state.panelRef.current))))),state.panelRef.current??internalModalRef.current]),onCloseModal,enabled&&!hasNestedModals),(0,hooks.ML)(ownerDocument?.defaultView,"keydown",(event=>{if(show&&!event.defaultPrevented&&!hasNestedModals)return event.key===constants.Lg.Escape?(event.preventDefault(),event.stopPropagation(),void onCloseModal()):void(onKeyDown&&onKeyDown(event))})),react.useEffect((()=>{if(!show)return;if(!internalModalRef.current)return;const observer=new IntersectionObserver((entries=>{for(const entry of entries)0===entry.boundingClientRect.x&&0===entry.boundingClientRect.y&&0===entry.boundingClientRect.width&&0===entry.boundingClientRect.height&&onCloseModal()}));return observer.observe(internalModalRef.current),()=>observer.disconnect()}),[show,internalModalRef,onCloseModal]);const contextValues=react.useMemo((()=>[{onClose:onCloseModal,setModalTitleId,visible:show},state]),[show,state,onCloseModal,setModalTitleId]),ourProps=react.useMemo((()=>({id,ref:modalRef,"aria-labelledby":state.id,"aria-modal":show,role:"modal"})),[id,modalRef,show,state.id]),theirProps=others,slot=react.useMemo((()=>({visible:show})),[show]),focusTrapFeatures=react.useMemo((()=>enabled?(0,utils.YW)(position,{leaf:FocusTrap.features.All&~FocusTrap.features.FocusLock,parent:FocusTrap.features.RestoreFocus}):FocusTrap.features.None),[enabled,position]);return react.createElement(StackProvider,{onUpdate:(0,hooks._q)(((message,type,element)=>{"Modal"===type&&(0,utils.YW)(message,{[StackContextMessageEnum.Add](){containers.current.add(element),setNestedModalCount((count=>count+1))},[StackContextMessageEnum.Remove](){containers.current.add(element),setNestedModalCount((count=>count-1))}})})),element:internalModalRef,enabled,type:"Modal"},react.createElement(ForcePortalRoot,{force:!0},react.createElement(Portal,{root},react.createElement(ModalContext.Provider,{value:contextValues},react.createElement(Portal.Group,{target:internalModalRef},react.createElement(ForcePortalRoot,{force:!1},react.createElement(FocusTrap,{containers,features:focusTrapFeatures,initialFocus},(0,core.XX)({defaultTag:"div",features:modalRenderFeatures,name:"Modal",ourProps,slot,theirProps,visible:show}))))))))}));try{ModalWidgetRoot.displayName="ModalWidgetRoot",ModalWidgetRoot.__docgenInfo={description:"",displayName:"ModalWidgetRoot",props:{as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"ElementType<any, keyof IntrinsicElements>"}},refName:{defaultValue:null,description:"",name:"refName",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"any"}},initialFocus:{defaultValue:null,description:"Init focus element",name:"initialFocus",required:!1,type:{name:"MutableRefObject<HTMLElement>"}},onClose:{defaultValue:null,description:"To close modal (Escape Key)",name:"onClose",required:!0,type:{name:"() => void"}},onKeyDown:{defaultValue:null,description:"Keydown event handler",name:"onKeyDown",required:!1,type:{name:"(e: KeyboardEvent<HTMLElement>) => void"}},root:{defaultValue:null,description:"Portal element",name:"root",required:!1,type:{name:"HTMLElement"}},show:{defaultValue:null,description:"To show modal",name:"show",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/combinations/overlays/widgets/Modal.Widget.Root.tsx#ModalWidgetRoot"]={docgenInfo:ModalWidgetRoot.__docgenInfo,name:"ModalWidgetRoot",path:"src/components/combinations/overlays/widgets/Modal.Widget.Root.tsx#ModalWidgetRoot"})}catch(__react_docgen_typescript_loader_error){}const ModalWidgetTitle=(0,core.FX)(((props,ref)=>{const id=`RootUI__Modal__Title-${(0,hooks.Bi)()}`,[{setModalTitleId,visible}]=useModalContext("Root__Modal__Title"),titleRef=(0,hooks.P$)(ref);react.useEffect((()=>(setModalTitleId(id),()=>setModalTitleId(null))),[id,setModalTitleId]);const ourProps=react.useMemo((()=>({id,ref:titleRef})),[id,titleRef]),theirProps=props,slot=react.useMemo((()=>({visible})),[visible]);return(0,core.XX)({defaultTag:"h5",name:"Root__Modal__Title",ourProps,slot,theirProps})}));try{ModalWidgetTitle.displayName="ModalWidgetTitle",ModalWidgetTitle.__docgenInfo={description:"",displayName:"ModalWidgetTitle",props:{as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"ElementType<any, keyof IntrinsicElements>"}},refName:{defaultValue:null,description:"",name:"refName",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/combinations/overlays/widgets/Modal.Widget.Title.tsx#ModalWidgetTitle"]={docgenInfo:ModalWidgetTitle.__docgenInfo,name:"ModalWidgetTitle",path:"src/components/combinations/overlays/widgets/Modal.Widget.Title.tsx#ModalWidgetTitle"})}catch(__react_docgen_typescript_loader_error){}}}]);